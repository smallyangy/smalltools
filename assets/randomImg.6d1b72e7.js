import{_ as A}from"./HeaderTitle.c3b99aef.js";import{I as E,e as $,H as k,w as q,f as F,r as g,o as j,i as x,c as e,k as m,g as s,z as D,F as I,B as N,J as U,j as J,l as T}from"./vendor.a519d337.js";const v="pinia-storage-",V={width:localStorage.getItem(v+"width")||"300",height:localStorage.getItem(v+"width")||"200",count:localStorage.getItem(v+"count")||1,randomImg:localStorage.getItem(v+"randomImg")||`{
        "width": 300,
        "height": 200,
        "count": 1
    }`},H=E("storage",{state:()=>({storage:V}),actions:{setItem(p,h){localStorage.setItem(v+p,h),this.storage[p]=h}},getters:{getItem(p){return p.storage.width}}});const L=T(" \u751F\u6210 "),O={key:0,class:"img-wrapper"},Q=$({setup(p){const h=H(),o=k(JSON.parse(h.storage.randomImg)),y={width:[{required:!0,trigger:"change",message:"\u8BF7\u8F93\u5165\u5BBD\u5EA6"}],height:[{required:!0,trigger:"change",message:"\u8BF7\u8F93\u5165\u9AD8\u5EA6"}],count:[{required:!0,trigger:"change",message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]};q(o,n=>{h.setItem("randomImg",JSON.stringify(n))});const b=["https://imgcdn.huanjutang.com/assets/588-4000x4000.jpeg","https://imgcdn.huanjutang.com/assets/249-4000x4000.jpeg","https://imgcdn.huanjutang.com/assets/113-4000x4000.jpeg","https://imgcdn.huanjutang.com/assets/405-4000x4000.jpeg","https://imgcdn.huanjutang.com/assets/911-4000x4000.jpeg","https://imgcdn.huanjutang.com/assets/216-4000x4000.jpeg","https://imgcdn.huanjutang.com/assets/916-4000x4000.jpeg","https://imgcdn.huanjutang.com/assets/964-4000x4000.jpeg","https://imgcdn.huanjutang.com/assets/218-4000x4000.jpeg","https://imgcdn.huanjutang.com/assets/200-4000x4000.jpeg","https://imgcdn.huanjutang.com/assets/331-4000x4000.jpeg"],C=(n,t)=>new Promise((r,a)=>{const d=b[Math.floor(b.length*Math.random())],f=Math.floor((4e3-n)*Math.random()),i=Math.floor((4e3-t)*Math.random()),_=`?imageMogr2/crop/!${n}x${t}a${f}a${i}`;fetch(`${d}${_}`).then(u=>u.url).then(u=>{r(u)}).catch(u=>{console.log(u),a(u)})}),c=F(!1),w=F([]),B=n=>{const{width:t,height:r,count:a}=n;if(a<=0){N.warning("\u6570\u91CF\u5FC5\u987B\u5927\u4E8E0");return}c.value=!0,w.value=[];let d=0;U(()=>{for(let i=0;i<a;i++)C(t,r).then(_=>{w.value.push(_)}).finally(()=>{f()})});function f(){d++,d===a&&(c.value=!1)}},M=n=>{console.log("Failed:",n)};return(n,t)=>{const r=g("a-input"),a=g("a-form-item"),d=g("a-button"),f=g("a-form"),i=g("a-image"),_=g("a-spin"),u=g("a-image-preview-group");return j(),x(I,null,[e(A),e(f,{ref:"formRef",model:m(o),"label-col":{style:{width:"100px"}},style:{"margin-top":"20px"},rules:y,onFinish:B,onFinishFailed:M},{default:s(()=>[e(a,{name:"width",label:"\u5BBD\u5EA6"},{default:s(()=>[e(r,{value:m(o).width,"onUpdate:value":t[0]||(t[0]=l=>m(o).width=l),valueModifiers:{number:!0},allowClear:"",style:{width:"300px"},disabled:c.value},null,8,["value","disabled"])]),_:1}),e(a,{name:"height",label:"\u9AD8\u5EA6"},{default:s(()=>[e(r,{value:m(o).height,"onUpdate:value":t[1]||(t[1]=l=>m(o).height=l),valueModifiers:{number:!0},allowClear:"",style:{width:"300px"},disabled:c.value},null,8,["value","disabled"])]),_:1}),e(a,{name:"count",label:"\u6570\u91CF"},{default:s(()=>[e(r,{value:m(o).count,"onUpdate:value":t[2]||(t[2]=l=>m(o).count=l),valueModifiers:{number:!0},allowClear:"",style:{width:"300px"},disabled:c.value},null,8,["value","disabled"])]),_:1}),e(a,{"wrapper-col":{style:{marginLeft:"100px"}}},{default:s(()=>[e(d,{type:"primary","html-type":"submit",loading:c.value},{default:s(()=>[L]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),w.value.length>0?(j(),x("div",O,[e(u,null,{default:s(()=>[(j(!0),x(I,null,J(w.value,(l,S)=>(j(),x("div",{key:S,class:"img-item"},[e(i,{width:200,src:l,preview:!1},{placeholder:s(()=>[e(_,{spinning:!0},{default:s(()=>[e(i,{src:"https://imgcdn.huanjutang.com/assets/img/20220210085800.png",width:200,preview:!1})]),_:1})]),_:2},1032,["src"])]))),128))]),_:1})])):D("",!0)],64)}}});export{Q as default};
